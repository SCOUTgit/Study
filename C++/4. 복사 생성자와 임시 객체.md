# __4.1 복사 생성자__
- 복사 생성자는 객체의 복사본을 생성할 때 호출되는 생성자이다.
- 클래스를 작성할 때 복사 생성자를 생략하면 컴파일러가 만들어 넣는다.
```C++
클래스이름(const 클래스이름 &rhs);
```
---
## 함수 호출과 복사 생성자
- 복사 생성자가 호출되는 경우는 명시적으로 객체의 복사본을 생성하는 방식으로 선언하는 경우와 함수 형태로 호출되는 경우가 있다.
- 함수 형태로 호출할 때는 클래스가 매개변수로 사용되는 경우와 반환 형식으로 사용되는 경우로 나뉜다.
- 클래스가 매개변수로 사용되는 경우 복사생성자가 호출되면서 복사본이 생성된다.
- 객체를 쓸데없이 복사하는 비용을 아끼기 위해서 참조자를 이용하여 매개변수를 받는다.
---
## 깊은 복사와 얕은 복사
- 깊은 복사는 복사에 의해 실제로 두 개의 값이 생성되는 것이다.
- 얕은 복사는 대상이 되는 값은 여전히 하나뿐인 접근 포인터만 둘로 늘어나는 것이다.
- 얕은 복사를 하는 경우 동적 생성한 인스턴스를 함께 접근하기 때문에 오류를 발생시킬 수 있다.
---
## 대입 연산자
- 단순 대입 연산자를 이용해서 객체를 복사하면 오류를 발생시킨다.
- 이를 막기 위해서 연산자 다중 정의를 통해 단순 대입 연산자를 수정해야 한다.
```C++
클래스이름& operator=(const 클래스이름 &rhs){
    // 객체의 값 복사

    return *this;
}
```
---
# __4.2 묵시적변환__
## 변환 생성자
- 변환 생성자는 매개변수가 한 개인 생성자를 뜻한다.
- 변환 생성자는 불필요한 임시 객체를 만들어냄으로써 프로그램의 효율을 갉아먹는다.
+ 예시
```C++
class TestData
{
public:
    TestData(int nParam) : m_nData(nParam)
    {

    }

    int GetData() const { return m_nData; }
private:
    int m_nData = 0;
};

void TestFunc(TestData param)   // int 자료형을 이용해서 임시 객체를 만든다.
{
    std::cout << "TestFunc(): " << param.Getdata() << std::endl;
}

int main(){
    TestFunc(5);    // int 자료형에서 TestData 형식으로 묵시적으로 변환된다.

    return 0;
}
```
- 이를 해결하기 위해서 explicit 예약어를 변환 생성자 앞에 붙이면 된다.
- explicit 예약어를 이용하면 직접 변환 형식을 지정해야 한다고 컴파일 오류를 발생시킨다.
---
## 허용되는 변환
- 클래스가 변환 생성자를 제공하면 두 형식 사이에 호환성이 생긴다.
- 형변환 연산자를 만들어 넣으면 불가능한 변환이 가능해진다.
```C++
operator 자료형(void) { return 값; }
```
- static_cast를 이용하면 적절한 형변환 연산자를 제공하지 않으면 강제로 형식을 변환해주지 않는다.
- 형변환 연산자 앞에 explicit 예약어를 적용하면 묵시적인 형변환을 막을 수 있다.
---
# __4.3 임시 객체와 이동 시맨틱__
## 이름 없는 임시 객체
- 이름 없는 임시 객체는 존재하는 인스턴스지만 식별자가 부여되지 않은 객체를 말한다.
- 함수의 반환 형식이 클래스인 경우에 발생한다.
- 함수 호출을 통해서 반환되는 임시 객체는 함수 호출 후 연산을 마치고 바로 소멸된다.
- 하지만 이름 없는 임시 객체를 원본으로 하는 참조형 변수를 만들 경우 이름 없는 임시 객체는 참조형 변수가 소멸될 때 같이 소멸된다.
---
## r-value참조
- r-value는 단순 대입 연산자의 오른쪽 항을 말한다.
- r-value 참조자는 기존 참조자와 달리 &가 두 번 붙는다.
- r-value 참조는 연산에 따라 생성된 임시 객체 또한 참조가 가능하다.
---
## 이동 시맨틱
- 이동 시맨틱은 이동 생성자와 이동 대입 연산자로 구현된다.
- 복사 생성자와 대입 연산자에 r-value 참조를 조합해서 새로운 생성 및 대입의 경우를 만든 것이다.
- 이동 생성자는 어차피 사라질 임시 객체를 얕은 복사를 통해 값을 복사하면서 성능을 높인다.
```C++
클래스이름(클래스이름 &&rhs){
    // 객체 복사
}
```